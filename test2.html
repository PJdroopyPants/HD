<!DOCTYPE HTML>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="The Human Design System integrated into an astrology clock along with the I-Ching gates.">
<title>The Human Design</title>

<style type="text/css">

*,
*:before,
*:after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html {
  scroll-behavior: smooth;
}
body{
	margin:0 auto;
	width:100%;
	background-color:#272727;
	font-size: 100%;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	-webkit-transform: translateZ(0);
	-moz-transform: translateZ(0);
	-ms-transform: translateZ(0);
	-o-transform: translateZ(0);
	transform: translateZ(0);
	-moz-transition: all 1s;
	-webkit-transition: all 1s;
	-o-transition: all 1s;
	transition: all 1s;
}
#allWrapit{
display:block;
position:relative;	
}
#coverUp {
	display:block;
	position:absolute;
	left:0;
	top:0;
	right:0;
	bottom:0;
	width:100%;
	height:100%;
	background-color:#272727;
	z-index:999;
	pointer-events:none;	
}
#footerWrapper {
	display:block;
	position: absolute;
	top:0;
	left:0;
	right:0;
	bottom:0;
	height:1080px;
	width:1080px;
	max-height:1080px;
	max-width:1080px;
	transform-origin: 0% 0%;
	margin:0 auto;
}
#footerSpacer {
	display:block;
	position: relative;
	height:120vh;
	margin-top:-120vh;
	width:100vw;
	background-color:#272727;
	z-index:9999;
	box-shadow: 0px 6px 5px 0px rgba(0, 0, 0, 0.3),
				inset 0px -9px 9px rgba(0, 0, 0, 0.1);
	border:0;
	border-bottom:2px solid #d4af37;
}
#canvaswrapper{
	display:block;
	position:relative;
	max-height:1080px;
	max-width:1080px;
	margin:0 auto;
	z-index:99;
}
#canvas{
	display:block;
	position:absolute;
	background-image: url('/img/HumanDesignClockGoldAlt.svg?v=fucssak256');
	background-position: center;
	background-repeat: no-repeat;
	/*background-size: 1080px 1080px;*/
	background-size: contain;
	height:1080px;
	width:1080px;
	top:0;
	left:0;
}
#canvasTop{
	display:block;
	position:absolute;
	background-image: url('/img/HumanDesignClockGoldAltTopAlt.svg?v=mehard26s5');
	background-position: center;
	background-repeat: no-repeat;
	/*background-size: 1080px 1080px;*/
	background-size: contain;
	height:1080px;
	width:1080px;
	top:0;
	left:0;
	pointer-events:none;
}
.smallSpacer{
	display:block;
	position:relative;
	height:5vh;
}
.mediumSpacer{
	display:block;
	position:relative;
	height:10vh;
}
.largeSpacer{
	display:block;
	position:relative;
	height:25vh;
}

</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollToPlugin.min.js"></script>
<script src="/js/greenmin/ScrollSmoother.min.js"></script>
<script src="/js/greenmin/SplitText.min.js"></script>
<script src="/js/greenmin/MorphSVGPlugin.min.js"></script>
</head>
<body>
<div id="allWrapit">
    <!--<div id="footerSpacer"></div>-->
    <div id="coverUp"></div>
    <div id="footerWrapper">
		<div id="canvaswrapper">
		<canvas id="canvas" height="1080" width="1080"></canvas>
		<div id="canvasTop"></div>
    </div>
	</div>
</div>
<script>
let footerWrapper = document.getElementById('footerWrapper'),
        wrapper = document.getElementById('canvaswrapper'),
        cover = document.getElementById('coverUp'),
        maxWidth  = footerWrapper.clientWidth,
        maxHeight = footerWrapper.clientHeight;
window.addEventListener("resize", resize);
window.addEventListener("load", resize);
resize();
TweenLite.to(cover, 1, {autoAlpha:0});
function resize(){let scale,
    width = window.innerWidth,
	height = window.innerHeight,
	isMax = width >= maxWidth && height >= maxHeight;

    scale = Math.min(width/maxWidth, height/maxHeight);
    footerWrapper.style.transform = isMax?'':'scale(' + scale + ')';
    wrapper.style.width = isMax?'':maxWidth * scale;
    wrapper.style.height = isMax?'':maxHeight * scale;
}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

requestAnimationFrame(mainLoop);

const gateLineObject  =  [
{gate :41.1, angle :0.9736},
{gate :41.2, angle :0.9572},
{gate :41.3, angle :0.9408},
{gate :41.4, angle :0.9245},
{gate :41.5, angle :0.9081},
{gate :41.6, angle :0.8918},
{gate :19.1, angle :0.8754},
{gate :19.2, angle :0.859},
{gate :19.3, angle :0.8427},
{gate :19.4, angle :0.8263},
{gate :19.5, angle :0.8099},
{gate :19.6, angle :0.7936},
{gate :13.1, angle :0.7772},
{gate :13.2, angle :0.7609},
{gate :13.3, angle :0.7445},
{gate :13.4, angle :0.7281},
{gate :13.5, angle :0.7118},
{gate :13.6, angle :0.6954},
{gate :49.1, angle :0.679},
{gate :49.2, angle :0.6627},
{gate :49.3, angle :0.6463},
{gate :49.4, angle :0.63},
{gate :49.5, angle :0.6136},
{gate :49.6, angle :0.5972},
{gate :30.1, angle :0.5809},
{gate :30.2, angle :0.5645},
{gate :30.3, angle :0.5481},
{gate :30.4, angle :0.5318},
{gate :30.5, angle :0.5154},
{gate :30.6, angle :0.4991},
{gate :55.1, angle :0.4827},
{gate :55.2, angle :0.4663},
{gate :55.3, angle :0.45},
{gate :55.4, angle :0.4336},
{gate :55.5, angle :0.4172},
{gate :55.6, angle :0.4009},
{gate :37.1, angle :0.3845},
{gate :37.2, angle :0.3682},
{gate :37.3, angle :0.3518},
{gate :37.4, angle :0.3354},
{gate :37.5, angle :0.3191},
{gate :37.6, angle :0.3027},
{gate :63.1, angle :0.2863},
{gate :63.2, angle :0.27},
{gate :63.3, angle :0.2536},
{gate :63.4, angle :0.2373},
{gate :63.5, angle :0.2209},
{gate :63.6, angle :0.2045},
{gate :22.1, angle :0.1882},
{gate :22.2, angle :0.1718},
{gate :22.3, angle :0.1554},
{gate :22.4, angle :0.1391},
{gate :22.5, angle :0.1227},
{gate :22.6, angle :0.1064},
{gate :36.1, angle :0.09},
{gate :36.2, angle :0.0736},
{gate :36.3, angle :0.0573},
{gate :36.4, angle :0.0409},
{gate :36.5, angle :0.0245},
{gate :36.6, angle :0.0082},
{gate :25.1, angle :-0.0082},
{gate :25.2, angle :-0.0245},
{gate :25.3, angle :-0.0409},
{gate :25.4, angle :-0.0573},
{gate :25.5, angle :-0.0736},
{gate :25.6, angle :-0.09},
{gate :17.1, angle :-0.1064},
{gate :17.2, angle :-0.1227},
{gate :17.3, angle :-0.1391},
{gate :17.4, angle :-0.1554},
{gate :17.5, angle :-0.1718},
{gate :17.6, angle :-0.1882},
{gate :21.1, angle :-0.2045},
{gate :21.2, angle :-0.2209},
{gate :21.3, angle :-0.2373},
{gate :21.4, angle :-0.2536},
{gate :21.5, angle :-0.27},
{gate :21.6, angle :-0.2863},
{gate :51.1, angle :-0.3027},
{gate :51.2, angle :-0.3191},
{gate :51.3, angle :-0.3354},
{gate :51.4, angle :-0.3518},
{gate :51.5, angle :-0.3682},
{gate :51.6, angle :-0.3845},
{gate :42.1, angle :-0.4009},
{gate :42.2, angle :-0.4172},
{gate :42.3, angle :-0.4336},
{gate :42.4, angle :-0.45},
{gate :42.5, angle :-0.4663},
{gate :42.6, angle :-0.4827},
{gate :3.1, angle :-0.4991},
{gate :3.2, angle :-0.5154},
{gate :3.3, angle :-0.5318},
{gate :3.4, angle :-0.5481},
{gate :3.5, angle :-0.5645},
{gate :3.6, angle :-0.5809},
{gate :27.1, angle :-0.5972},
{gate :27.2, angle :-0.6136},
{gate :27.3, angle :-0.63},
{gate :27.4, angle :-0.6463},
{gate :27.5, angle :-0.6627},
{gate :27.6, angle :-0.679},
{gate :24.1, angle :-0.6954},
{gate :24.2, angle :-0.7118},
{gate :24.3, angle :-0.7281},
{gate :24.4, angle :-0.7445},
{gate :24.5, angle :-0.7609},
{gate :24.6, angle :-0.7772},
{gate :2.1, angle :-0.7936},
{gate :2.2, angle :-0.8099},
{gate :2.3, angle :-0.8263},
{gate :2.4, angle :-0.8427},
{gate :2.5, angle :-0.859},
{gate :2.6, angle :-0.8754},
{gate :23.1, angle :-0.8918},
{gate :23.2, angle :-0.9081},
{gate :23.3, angle :-0.9245},
{gate :23.4, angle :-0.9408},
{gate :23.5, angle :-0.9572},
{gate :23.6, angle :-0.9736},
{gate :8.1, angle :-0.9899},
{gate :8.2, angle :-1.0063},
{gate :8.3, angle :-1.0227},
{gate :8.4, angle :-1.039},
{gate :8.5, angle :-1.0554},
{gate :8.6, angle :-1.0717},
{gate :20.1, angle :-1.0881},
{gate :20.2, angle :-1.1045},
{gate :20.3, angle :-1.1208},
{gate :20.4, angle :-1.1372},
{gate :20.5, angle :-1.1536},
{gate :20.6, angle :-1.1699},
{gate :16.1, angle :-1.1863},
{gate :16.2, angle :-1.2026},
{gate :16.3, angle :-1.219},
{gate :16.4, angle :-1.2354},
{gate :16.5, angle :-1.2517},
{gate :16.6, angle :-1.2681},
{gate :35.1, angle :-1.2845},
{gate :35.2, angle :-1.3008},
{gate :35.3, angle :-1.3172},
{gate :35.4, angle :-1.3335},
{gate :35.5, angle :-1.3499},
{gate :35.6, angle :-1.3663},
{gate :45.1, angle :-1.3826},
{gate :45.2, angle :-1.399},
{gate :45.3, angle :-1.4154},
{gate :45.4, angle :-1.4317},
{gate :45.5, angle :-1.4481},
{gate :45.6, angle :-1.4644},
{gate :12.1, angle :-1.4808},
{gate :12.2, angle :-1.4972},
{gate :12.3, angle :-1.5135},
{gate :12.4, angle :-1.5299},
{gate :12.5, angle :-1.5463},
{gate :12.6, angle :-1.5626},
{gate :15.1, angle :-1.579},
{gate :15.2, angle :-1.5953},
{gate :15.3, angle :-1.6117},
{gate :15.4, angle :-1.6281},
{gate :15.5, angle :-1.6444},
{gate :15.6, angle :-1.6608},
{gate :52.1, angle :-1.6772},
{gate :52.2, angle :-1.6935},
{gate :52.3, angle :-1.7099},
{gate :52.4, angle :-1.7262},
{gate :52.5, angle :-1.7426},
{gate :52.6, angle :-1.759},
{gate :39.1, angle :-1.7753},
{gate :39.2, angle :-1.7917},
{gate :39.3, angle :-1.8081},
{gate :39.4, angle :-1.8244},
{gate :39.5, angle :-1.8408},
{gate :39.6, angle :-1.8571},
{gate :53.1, angle :-1.8735},
{gate :53.2, angle :-1.8899},
{gate :53.3, angle :-1.9062},
{gate :53.4, angle :-1.9226},
{gate :53.5, angle :-1.939},
{gate :53.6, angle :-1.9553},
{gate :62.1, angle :-1.9717},
{gate :62.2, angle :-1.988},
{gate :62.3, angle :-2.0044},
{gate :62.4, angle :-2.0208},
{gate :62.5, angle :-2.0371},
{gate :62.6, angle :-2.0535},
{gate :56.1, angle :-2.0699},
{gate :56.2, angle :-2.0862},
{gate :56.3, angle :-2.1026},
{gate :56.4, angle :-2.1189},
{gate :56.5, angle :-2.1353},
{gate :56.6, angle :-2.1517},
{gate :31.1, angle :-2.168},
{gate :31.2, angle :-2.1844},
{gate :31.3, angle :-2.2008},
{gate :31.4, angle :-2.2171},
{gate :31.5, angle :-2.2335},
{gate :31.6, angle :-2.2498},
{gate :33.1, angle :-2.2662},
{gate :33.2, angle :-2.2826},
{gate :33.3, angle :-2.2989},
{gate :33.4, angle :-2.3153},
{gate :33.5, angle :-2.3317},
{gate :33.6, angle :-2.348},
{gate :7.1, angle :-2.3644},
{gate :7.2, angle :-2.3807},
{gate :7.3, angle :-2.3971},
{gate :7.4, angle :-2.4135},
{gate :7.5, angle :-2.4298},
{gate :7.6, angle :-2.4462},
{gate :4.1, angle :-2.4626},
{gate :4.2, angle :-2.4789},
{gate :4.3, angle :-2.4953},
{gate :4.4, angle :-2.5116},
{gate :4.5, angle :-2.528},
{gate :4.6, angle :-2.5444},
{gate :29.1, angle :-2.5607},
{gate :29.2, angle :-2.5771},
{gate :29.3, angle :-2.5935},
{gate :29.4, angle :-2.6098},
{gate :29.5, angle :-2.6262},
{gate :29.6, angle :-2.6425},
{gate :59.1, angle :-2.6589},
{gate :59.2, angle :-2.6753},
{gate :59.3, angle :-2.6916},
{gate :59.4, angle :-2.708},
{gate :59.5, angle :-2.7243},
{gate :59.6, angle :-2.7407},
{gate :40.1, angle :-2.7571},
{gate :40.2, angle :-2.7734},
{gate :40.3, angle :-2.7898},
{gate :40.4, angle :-2.8062},
{gate :40.5, angle :-2.8225},
{gate :40.6, angle :-2.8389},
{gate :64.1, angle :-2.8552},
{gate :64.2, angle :-2.8716},
{gate :64.3, angle :-2.888},
{gate :64.4, angle :-2.9043},
{gate :64.5, angle :-2.9207},
{gate :64.6, angle :-2.9371},
{gate :47.1, angle :-2.9534},
{gate :47.2, angle :-2.9698},
{gate :47.3, angle :-2.9861},
{gate :47.4, angle :-3.0025},
{gate :47.5, angle :-3.0189},
{gate :47.6, angle :-3.0352},
{gate :6.1, angle :-3.0516},
{gate :6.2, angle :-3.068},
{gate :6.3, angle :-3.0843},
{gate :6.4, angle :-3.1007},
{gate :6.5, angle :-3.117},
{gate :6.6, angle :-3.1334},
{gate :46.1, angle :3.1416},
{gate :46.2, angle :3.1252},
{gate :46.3, angle :3.1089},
{gate :46.4, angle :3.0925},
{gate :46.5, angle :3.0761},
{gate :46.6, angle :3.0598},
{gate :18.1, angle :3.0434},
{gate :18.2, angle :3.0271},
{gate :18.3, angle :3.0107},
{gate :18.4, angle :2.9943},
{gate :18.5, angle :2.978},
{gate :18.6, angle :2.9616},
{gate :48.1, angle :2.9452},
{gate :48.2, angle :2.9289},
{gate :48.3, angle :2.9125},
{gate :48.4, angle :2.8962},
{gate :48.5, angle :2.8798},
{gate :48.6, angle :2.8634},
{gate :57.1, angle :2.8471},
{gate :57.2, angle :2.8307},
{gate :57.3, angle :2.8143},
{gate :57.4, angle :2.798},
{gate :57.5, angle :2.7816},
{gate :57.6, angle :2.7653},
{gate :32.1, angle :2.7489},
{gate :32.2, angle :2.7325},
{gate :32.3, angle :2.7162},
{gate :32.4, angle :2.6998},
{gate :32.5, angle :2.6834},
{gate :32.6, angle :2.6671},
{gate :50.1, angle :2.6507},
{gate :50.2, angle :2.6344},
{gate :50.3, angle :2.618},
{gate :50.4, angle :2.6016},
{gate :50.5, angle :2.5853},
{gate :50.6, angle :2.5689},
{gate :28.1, angle :2.5525},
{gate :28.2, angle :2.5362},
{gate :28.3, angle :2.5198},
{gate :28.4, angle :2.5035},
{gate :28.5, angle :2.4871},
{gate :28.6, angle :2.4707},
{gate :44.1, angle :2.4544},
{gate :44.2, angle :2.438},
{gate :44.3, angle :2.4216},
{gate :44.4, angle :2.4053},
{gate :44.5, angle :2.3889},
{gate :44.6, angle :2.3726},
{gate :1.1, angle :2.3562},
{gate :1.2, angle :2.3398},
{gate :1.3, angle :2.3235},
{gate :1.4, angle :2.3071},
{gate :1.5, angle :2.2907},
{gate :1.6, angle :2.2744},
{gate :43.1, angle :2.258},
{gate :43.2, angle :2.2417},
{gate :43.3, angle :2.2253},
{gate :43.4, angle :2.2089},
{gate :43.5, angle :2.1926},
{gate :43.6, angle :2.1762},
{gate :14.1, angle :2.1598},
{gate :14.2, angle :2.1435},
{gate :14.3, angle :2.1271},
{gate :14.4, angle :2.1108},
{gate :14.5, angle :2.0944},
{gate :14.6, angle :2.078},
{gate :34.1, angle :2.0617},
{gate :34.2, angle :2.0453},
{gate :34.3, angle :2.0289},
{gate :34.4, angle :2.0126},
{gate :34.5, angle :1.9962},
{gate :34.6, angle :1.9799},
{gate :9.1, angle :1.9635},
{gate :9.2, angle :1.9471},
{gate :9.3, angle :1.9308},
{gate :9.4, angle :1.9144},
{gate :9.5, angle :1.898},
{gate :9.6, angle :1.8817},
{gate :5.1, angle :1.8653},
{gate :5.2, angle :1.849},
{gate :5.3, angle :1.8326},
{gate :5.4, angle :1.8162},
{gate :5.5, angle :1.7999},
{gate :5.6, angle :1.7835},
{gate :26.1, angle :1.7671},
{gate :26.2, angle :1.7508},
{gate :26.3, angle :1.7344},
{gate :26.4, angle :1.7181},
{gate :26.5, angle :1.7017},
{gate :26.6, angle :1.6853},
{gate :11.1, angle :1.669},
{gate :11.2, angle :1.6526},
{gate :11.3, angle :1.6362},
{gate :11.4, angle :1.6199},
{gate :11.5, angle :1.6035},
{gate :11.6, angle :1.5872},
{gate :10.1, angle :1.5708},
{gate :10.2, angle :1.5544},
{gate :10.3, angle :1.5381},
{gate :10.4, angle :1.5217},
{gate :10.5, angle :1.5053},
{gate :10.6, angle :1.489},
{gate :58.1, angle :1.4726},
{gate :58.2, angle :1.4563},
{gate :58.3, angle :1.4399},
{gate :58.4, angle :1.4235},
{gate :58.5, angle :1.4072},
{gate :58.6, angle :1.3908},
{gate :38.1, angle :1.3744},
{gate :38.2, angle :1.3581},
{gate :38.3, angle :1.3417},
{gate :38.4, angle :1.3254},
{gate :38.5, angle :1.309},
{gate :38.6, angle :1.2926},
{gate :54.1, angle :1.2763},
{gate :54.2, angle :1.2599},
{gate :54.3, angle :1.2435},
{gate :54.4, angle :1.2272},
{gate :54.5, angle :1.2108},
{gate :54.6, angle :1.1945},
{gate :61.1, angle :1.1781},
{gate :61.2, angle :1.1617},
{gate :61.3, angle :1.1454},
{gate :61.4, angle :1.129},
{gate :61.5, angle :1.1126},
{gate :61.6, angle :1.0963},
{gate :60.1, angle :1.0799},
{gate :60.2, angle :1.0636},
{gate :60.3, angle :1.0472},
{gate :60.4, angle :1.0308},
{gate :60.5, angle :1.0145},
{gate :60.6, angle :0.9981}];
var sunSym    		= 1, // planet symbol paths
	earLunSym 		= 1,
	nnodeSym 		= 1,
	snodeSym 		= 1,
	plutoSym 		= 1,
	nepSyn  		= 1,
	uraSyn 		    = 1,
	satSyn  		= 1,
	jupSyn  		= 1,
	marSyn  		= 1,
	venSyn   		= 1,
	merSyn   		= 1,
	mooSyn  		= 1,
	earSyn 		    = 1,

	pace=33,
	sunMoved=false,
	paused=false;
const ctx = canvas.getContext("2d");
const TAU = Math.PI * 2;
const centerOnPlanetName = "EarthLine";
const globalMatrix = [1,0,0,1,0,0];
const solSystem = {};
const planets = [];
const planetCommon = {
      x: 0, y: 0, cos: 1, sin: 0,
      update(time) {
		this.ang = this.startAng - this.orbitalSpeed/pace * time;
        this.cos = Math.cos(this.ang);
        this.sin = Math.sin(this.ang);
        if (this.orbits && this.maxDist == 0) {
            this.x = this.orbits.x + this.cos * this.dist;
            this.y = this.orbits.y + this.sin * this.dist;
        } else if (this.orbits && this.maxDist > 0 && this.distTo > this.maxDist) {
			this.dist=this.dist-(this.distTo-this.maxDist);
            this.x = this.orbits.x + this.cos * this.dist;
            this.y = this.orbits.y + this.sin * this.dist;
        }else  if (this.orbits && this.maxDist > 0 && this.distTo < this.maxDist && sunMoved==true) {
			this.dist=this.dist+(this.maxDist-this.distTo);
            this.x = this.orbits.x + this.cos * this.dist;
            this.y = this.orbits.y + this.sin * this.dist;
		}else  if (this.orbits && this.maxDist > 0 && sunMoved==false) {
			//this.dist=this.dist;
            this.x = this.orbits.x + this.cos * this.dist;
            this.y = this.orbits.y + this.sin * this.dist;
		}
     },
	draw(ctx, globalMat) {

		ctx.setTransform(...globalMat);
		ctx.transform(this.cos, this.sin, -this.sin, this.cos, this.x, this.y);
		if (this.type === 1){ // planet, lunar, node symbols			
			setShadow(ctx, "rgba(0,0,0,0.8)", 0, 7, 8, -this.ang);
			symbo(this.symbo, this.fill,this.stroke, -this.ang);
		}else if (this.type === 7){ // moon and nodes
			setShadow(ctx, "rgba(0,0,0,0.8)", 0, 3, 5, this.ang);
			symboSmall(this.symbo, this.fill, this.stroke);
		}else if (this.type === 2){ // sun top
			sunMoved=true;
			setShadow(ctx, "rgba(0,0,0,0.8)", 0, 3, 2, -this.ang);
			symboLarge(this.symbo, this.fill, this.stroke);
		}else if (this.type === 3){ // sun line
			setShadow(ctx, "black", 0, 5, 6, -this.ang);
			const ax = Math.cos(this.dirTo);
			const ay = Math.sin(this.dirTo);
			ctx.rotate(-Math.PI);
				
			ctx.beginPath();
			ctx.lineCap = "square";
			ctx.lineWidth = 28;
			ctx.lineTo(ax * -this.distTo-15, ay * -this.distTo);
			ctx.lineTo(ax * (344-this.distTo), ay * (344-this.distTo));
			ctx.strokeStyle = "#232323";
			ctx.stroke();
			ctx.closePath();
			
			setShadow(ctx, "rgba(0,0,0,0.7)", 0, 13, 11, -this.ang);
			
			ctx.translate(ax * (406-this.distTo), ay * (406-this.distTo));
			ctx.beginPath();
			ctx.lineWidth = 16;
			ctx.strokeStyle = "#232323";
			ctx.arc(0,0,45,0,2*Math.PI,true);
			ctx.stroke();
			ctx.closePath();
			
			setShadow(ctx, "black", 0, 2, 3, -this.ang);
			
			ctx.beginPath();
			ctx.lineWidth = 2;
			ctx.strokeStyle = "#d4af37";
			ctx.arc(0,0,45,0,2*Math.PI,true);
			ctx.stroke();
			ctx.closePath();
			ctx.translate(ax * -(406-this.distTo), ay * -(406-this.distTo));
			
			setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
			ctx.beginPath();
			ctx.lineCap = "square";
			ctx.lineWidth = 30;
			ctx.lineTo(ax * -this.distTo-15, ay * -this.distTo);
			ctx.lineTo(ax * (341-this.distTo), ay * (341-this.distTo));
			ctx.strokeStyle = "#232323";
			ctx.stroke();
			ctx.closePath();
			
			setShadow(ctx, "black", 0, 2, 3, -this.ang);
			
			ctx.beginPath();
			ctx.lineCap = "round";
			ctx.lineWidth = 4;
			ctx.lineTo(ax * -this.distTo-10, ay * -this.distTo);
			ctx.lineTo(ax * (356-this.distTo), ay * (356-this.distTo));
			ctx.strokeStyle = "#d4af37";
			ctx.stroke();
			ctx.closePath();
			
			ctx.beginPath();
			ctx.lineCap = "butt";
			ctx.lineTo(ax * (520-this.distTo), ay * (520-this.distTo));
			ctx.lineTo(ax * (533-this.distTo), ay * (533-this.distTo));
			ctx.strokeStyle = "#375CD4";
			ctx.lineWidth = 7;
			ctx.stroke();
			ctx.closePath();
			
		}else if (this.type === 4){ // earth  line
			setShadow(ctx, "black", 0, 4, 5, -this.ang);
			ctx.beginPath();
			ctx.lineCap = "round";
			ctx.lineWidth = 20;
			ctx.lineTo(0, 0);
			ctx.lineTo(445, 0);
			ctx.strokeStyle = "#232323";
			ctx.stroke();
			ctx.closePath();
			ctx.beginPath();
			setShadow(ctx, "black", 0, 1, 2, -this.ang);
			ctx.lineCap = "round";
			ctx.lineWidth = 2;
			ctx.lineTo(0, 0);
			ctx.lineTo(452, 0);
			ctx.strokeStyle = "#d4af37";
			ctx.stroke();
			ctx.closePath();
			ctx.beginPath();
			ctx.lineCap = "butt";
			ctx.lineWidth = 7;
			ctx.lineTo(520, 0);
			ctx.lineTo(533, 0);
			ctx.strokeStyle = "#375CD4";
			ctx.stroke();
			ctx.closePath();
		}else if (this.type === 9){ //  lunar phaze
			setShadow(ctx, "rgba(0,0,0,0.8)", 0, 5, 7, -this.ang);
			ctx.beginPath();
			ctx.lineCap = "butt";
			ctx.lineWidth = 34;
			ctx.strokeStyle = "#232323";
			ctx.arc(0,0,36,0,2*Math.PI,true);
			ctx.stroke();
			ctx.closePath();
			setShadow(ctx, "black", 0, 2, 1, -this.ang);
			symboMoon(this.symbo, "#d4af37");
		}
		if (this.dirTo !== undefined && (this.type ==5 || this.type === 6)) {// planet, lunar, node lines
			const ax = Math.cos(this.dirTo);
			const ay = Math.sin(this.dirTo);
			ctx.rotate(-Math.PI);
			if(this.type === 5){ // moon & nodes line
					ctx.beginPath();
					ctx.lineWidth = 8;
					setShadow(ctx, "rgba(0,0,0,0.8)", 0, 3, 5, -this.ang);
					ctx.lineCap = "round";
					ctx.lineTo(0, 0);
					ctx.lineTo(ax * 28, ay * 28);
					ctx.strokeStyle = "#232323";	
					ctx.stroke();
					ctx.closePath();
					ctx.beginPath();
					ctx.lineWidth = 1;
					setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
					ctx.lineCap = "round";
					ctx.lineTo(0, 0);
					ctx.lineTo(ax * 30, ay * 30);
					ctx.strokeStyle = "#d4af37";
					ctx.stroke();
					ctx.closePath();
			} else if (this.type === 6 && sunMoved==true) {  // planets lines

				setShadow(ctx, "rgba(0,0,0,0.8)", 0, 6, 9, -this.ang);
				
				ctx.beginPath();
				ctx.lineWidth = 10;
				ctx.lineTo(0, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist, 0);
				ctx.strokeStyle = "#232323";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
				
				ctx.lineWidth = 1;
				ctx.lineTo(0, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist, 0);
				ctx.strokeStyle = "#d4af37";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0.8)", 0, 6, 9, -this.ang);
				
				ctx.beginPath();
				ctx.lineWidth = 12;
				ctx.lineTo(this.dist, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist/3, 0);
				ctx.strokeStyle = "#232323";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
				
				ctx.beginPath();
				ctx.lineWidth = 2;
				ctx.lineTo(this.dist, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist/3, 0);
				ctx.strokeStyle = "#d4af37";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0.8)", 0, 6, 9, -this.ang);
				
				ctx.beginPath();
				ctx.lineWidth = 14;
				ctx.lineTo(this.dist, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist/2, 0);
				ctx.strokeStyle = "#232323";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
				
				ctx.beginPath();
				ctx.lineWidth = 4;
				ctx.lineTo(this.dist-55, 0);
				ctx.lineCap = "square";
				ctx.lineTo(this.dist/2, 0);
				ctx.strokeStyle = "#d4af37";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0.9)", 0, 3, 5, -this.ang);
				
				ctx.beginPath();
				ctx.lineWidth = 16;
				ctx.lineTo(this.dist+40, 0);
				ctx.lineCap = "round";
				ctx.lineTo(this.dist-40, 0);
				ctx.strokeStyle = "#d4af37";
				ctx.stroke();
				ctx.closePath();

				setShadow(ctx, "rgba(0,0,0,0.8)", 0, 4, 5, -this.ang);
				ctx.beginPath();
				ctx.lineCap = "round";
				ctx.lineWidth = 8;
				ctx.lineTo(ax * 28, ay * 28);
				ctx.lineTo(0, 0);
				ctx.strokeStyle = "#232323";
				ctx.stroke();
				ctx.closePath();
				
				setShadow(ctx, "rgba(0,0,0,0)", 0, 0, 0, 0);
				
				ctx.beginPath();
				ctx.lineCap = "round";
				ctx.lineWidth = 1;
				ctx.lineTo(ax * 30, ay * 30);
				ctx.lineTo(0, 0);
				ctx.strokeStyle = "#d4af37";
				ctx.stroke();
				ctx.closePath();
			
			}
			ctx.beginPath();
			setShadow(ctx, "black", 0, 1, 2, -this.ang);
			ctx.lineCap = "butt";
			ctx.lineWidth = 7;
			ctx.lineTo(ax * (520-this.distTo), ay * (520-this.distTo));
			ctx.lineTo(ax * (533-this.distTo), ay * (533-this.distTo));
			ctx.strokeStyle = "#375CD4";
			ctx.stroke();
			ctx.closePath();
		}
		
	},
	directionTo(planet) {
		if (planet !== this) {
			this.dirTo =  Math.atan2(planet.y - this.y, planet.x - this.x) - this.ang;
			this.distTo = Math.hypot(planet.y - this.y, planet.x - this.x);
		} else {
			this.dirTo = undefined;
		}
	}
	
};
const planet = (idnum, name, orbitsName, dist, orbitalSpeed, startAng, fill, stroke, type, maxDist, symbo) => {
    planets.push(solSystem[name] = {
        orbits: solSystem[orbitsName],
        dist,
        orbitalSpeed,
        startAng,
        fill,
		stroke,
		type,
		maxDist,
        symbo,
        idnum,
        ...planetCommon,
     });
};


var sunPosD = findAngle(gateLineObject,52.1),
	merPosD = findAngle(gateLineObject,35.3),
	venPosD = findAngle(gateLineObject,52.3),
	mooPosD = findAngle(gateLineObject,16.6),
	nnoPosD = findAngle(gateLineObject,44.5),
	marPosD = findAngle(gateLineObject, 4.5),
	jupPosD = findAngle(gateLineObject,23.3),
	satPosD = findAngle(gateLineObject,31.1),
	uraPosD = findAngle(gateLineObject,28.2),
	nepPosD = findAngle(gateLineObject, 5.1),
	pluPosD = findAngle(gateLineObject,18.6);

planet(1, "SunLine",          undefined,    0,          1,         sunPosD,  "#d4af37", "#232323",    3, 0);
planet(4, "EarthLine",        "SunLine",   128,         1, sunPosD+Math.PI,  "#375CD4", "#232323",    4, 0);
planet(7, "NorthNodeLine",  "EarthLine",    70,   -0.0537,         nnoPosD,  "#d4af37", "#232323",    5, 0);
planet(8, "SouthNodeLine",  "EarthLine",    70,   -0.0537, nnoPosD-Math.PI,  "#d4af37", "#232323",    5, 0);
planet(13,"PlutoLine",        "SunLine",   430,     0.004,         pluPosD,  "#d4af37", "#232323",    6, 430);
planet(12,"NeptuneLine",      "SunLine",   395,    0.0061,         nepPosD,  "#d4af37", "#232323",    6, 395);
planet(11,"UranusLine",       "SunLine",   360,    0.0119,         uraPosD,  "#d4af37", "#232323",    6, 360);
planet(10,"SaturnLine",       "SunLine",   325,    0.0339,         satPosD,  "#d4af37", "#232323",    6, 325);
planet(9, "JupiterLine",      "SunLine",   290,    0.0842,         jupPosD,  "#d4af37", "#232323",    6, 290);
planet(5, "MarsLine",         "SunLine",   255,    0.5312,         marPosD,  "#d4af37", "#232323",    6, 255);
planet(3, "VenusLine",        "SunLine",  92.49,   1.6243,         venPosD,  "#d4af37", "#232323",    6, 0);
planet(2, "MercuryLine",      "SunLine",  50.65,   4.1477,         merPosD,  "#d4af37", "#232323",    6, 0);
planet(6, "MoonLine",       "EarthLine",    35,     13.37,         mooPosD,  "#d4af37", "#232323",    5, 0);

planet(1, "Sun",              undefined,     0,         1,         sunPosD,  "#d4af37", "#232323",    2, 0,   sunSym);
planet(9, "EarthLunar",       "SunLine",   128,         1, sunPosD+Math.PI,  "#d4af37", "#232323",    9, 0,   earLunSym);
planet(7, "NorthNode",      "EarthLine",    70,   -0.0537,         nnoPosD,  "#d4af37", "#232323",    7, 0,   nnodeSym);
planet(8, "SouthNode",      "EarthLine",    70,   -0.0537, nnoPosD-Math.PI,  "#d4af37", "#232323",    7, 0,   snodeSym);
planet(13,"Pluto",            "SunLine",   430,     0.004,         pluPosD,  "#d4af37", "#232323",    1, 430, plutoSym);
planet(12,"Neptune",          "SunLine",   395,    0.0061,         nepPosD,  "#d4af37", "#232323",    1, 395, nepSyn);
planet(11,"Uranus",           "SunLine",   360,    0.0119,         uraPosD,  "#d4af37", "#232323",    1, 360, uraSyn);
planet(10,"Saturn",           "SunLine",   325,    0.0339,         satPosD,  "#d4af37", "#232323",    1, 325, satSyn);
planet(9, "Jupiter",          "SunLine",   290,    0.0842,         jupPosD,  "#d4af37", "#232323",    1, 290, jupSyn);
planet(5, "Mars",             "SunLine",   256,    0.5312,         marPosD,  "#d4af37", "#232323",    1, 255, marSyn);
planet(3, "Venus",            "SunLine", 92.49,    1.6243,         venPosD,  "#d4af37", "#232323",    1, 0,   venSyn);
planet(2, "Mercury",          "SunLine", 50.65,    4.1477,         merPosD,  "#d4af37", "#232323",    1, 0,   merSyn);
planet(6, "Moon",           "EarthLine",    35,     13.37,         mooPosD,  "#d4af37", "#232323",    7, 0,   mooSyn);
planet(4, "Earth",            "SunLine",   128,         1, sunPosD+Math.PI,  "#d4af37", "#232323",    1, 0,   earSyn);

function centerOn(cx, cy, planet) {
	globalMatrix[4] = cx - planet.x;
    globalMatrix[5] = cy - planet.y;
}
function symboMoon(path,fill){
	ctx.translate(-50,-50);
	ctx.scale(1.25, 1.25);
	ctx.fillStyle = fill;
	var p = new Path2D(path);
	ctx.fill(p);
}
function symboSmall(path,fill,stroke,angle){
	ctx.rotate(angle);
	ctx.translate(-15,-15);
	ctx.scale(1.5, 1.5);
	ctx.strokeStyle = stroke;
	ctx.lineWidth = 3;
	ctx.fillStyle = fill;
	var p = new Path2D(path);
	ctx.stroke(p);
	ctx.fill(p);
}
function symbo(path,fill,stroke,angle){
	ctx.rotate(angle);
	ctx.translate(-18,-18);
	ctx.scale(1.8, 1.8);
	ctx.strokeStyle = stroke;
	ctx.lineWidth = 3;
	ctx.fillStyle = fill;
	var p = new Path2D(path);
	ctx.stroke(p);
	ctx.fill(p);
}
function symboLarge(path,fill,stroke){
	ctx.translate(-22,-22);
	ctx.scale(2.2, 2.2);
	ctx.strokeStyle = stroke;
	ctx.lineWidth = 4;
	ctx.fillStyle = fill;
	var p = new Path2D(path);
	ctx.stroke(p);
	ctx.fill(p);
}
function setShadow(ctx, fill, ox, oy, blur, angle) {
	ctx.rotate(angle);
	ctx.shadowColor = fill;
	ctx.shadowOffsetX = ox;
	ctx.shadowOffsetY = oy;
	ctx.shadowBlur = blur;
	ctx.rotate(-angle);
}
function findAngle(gateLineObject, gate) {

  for (var i = 0; i < Object.keys(gateLineObject).length; i++) {
    if (gateLineObject[i].gate == gate) {
      return gateLineObject[i].angle+Math.PI;
    }
  }
}
function findGate(gateLineObject, targetNumber) {
  var closestAngle = 0;
  var closestAngleDifference = Math.abs(targetNumber - gateLineObject[0].angle);
  for (var i = 0; i < Object.keys(gateLineObject).length; i++) {
    var currentAngleDifference = Math.abs(targetNumber - gateLineObject[i].angle);
    if (currentAngleDifference < closestAngleDifference) {
      closestAngleDifference = currentAngleDifference;
      closestAngle = gateLineObject[i].gate;
    }
  }
  return closestAngle;
}
function mainLoop(time) {

    time /= 1000;
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    planets.forEach(planet => planet.update(time));
    planets.forEach(planet => planet.directionTo(solSystem[centerOnPlanetName]));
    centerOn(ctx.canvas.width * 0.5, ctx.canvas.height * 0.5, solSystem[centerOnPlanetName]);
    planets.forEach(planet => planet.draw(ctx, globalMatrix));
    requestAnimationFrame(mainLoop);
}



	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}
function Utils() {

}

Utils.prototype = {
    constructor: Utils,
    isElementInView: function (element, fullyInView) {
        var pageTop = $(window).scrollTop();
        var pageBottom = pageTop + $(window).height();
        var elementTop = $(element).offset().top;
        var elementBottom = elementTop + $(element).height();

        if (fullyInView === true) {
            return ((pageTop < elementTop) && (pageBottom > elementBottom));
        } else {
            return ((elementTop <= pageBottom) && (elementBottom >= pageTop));
        }
    }
};

var Utils = new Utils();

</script>
</body>
</html>